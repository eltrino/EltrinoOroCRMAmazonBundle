parameters:
    # transport
    orocrm_amazon.amazon_rest_transport.class:                              OroCRM\Bundle\AmazonBundle\Provider\Transport\AmazonRestTransport

    # providers
    orocrm_amazon.provider.amazon_channel_type.class:                       OroCRM\Bundle\AmazonBundle\Provider\AmazonChannelType

    # forms
    orocrm_amazon.form.type.amazon_rest_transport_setting.class:            OroCRM\Bundle\AmazonBundle\Form\Type\AmazonRestTransportSettingFormType

    orocrm_amazon.order.factory.class:                                      OroCRM\Bundle\AmazonBundle\Model\Order\OrderFactory
    orocrm_amazon.client.rest_client_factory.class:                         OroCRM\Bundle\AmazonBundle\Client\RestClientFactory
    orocrm_amazon.client.filters_factory.class:                             OroCRM\Bundle\AmazonBundle\Client\Filters\FiltersFactory
    orocrm_amazon.navigation.listener_class:                                OroCRM\Bundle\AmazonBundle\EventListener\AmazonNavigationListener

services:
   # transport
    orocrm_amazon.amazon_rest_transport:
        class: %orocrm_amazon.amazon_rest_transport.class%
        arguments:
            - @orocrm_amazon.client_filters_factory
        tags:
            - { name: oro_integration.transport, type: amazon_rest, channel_type: amazon}

   # providers
    orocrm_amazon.provider.amazon_channel_type:
        class: %orocrm_amazon.provider.amazon_channel_type.class%
        tags:
            - { name: oro_integration.channel, type: amazon }

    # forms
    orocrm_amazon.form.type.amazon_rest_transport_setting:
        class: %orocrm_amazon.form.type.amazon_rest_transport_setting.class%
        tags:
            - { name: form.type, alias: orocrm_amazon_rest_transport_setting_form_type }

    orocrm_amazon.order.factory:
        class: %orocrm_amazon.order.factory.class%

    orocrm_amazon.client_rest_client_factory:
        class: %orocrm_amazon.client.rest_client_factory.class%

    orocrm_amazon.client_filters_factory:
        class: %orocrm_amazon.client.filters_factory.class%

    # event listeners
    orocrm_amazon.event_listener.navigation:
        class: %orocrm_amazon.navigation.listener_class%
        arguments:
            - @doctrine.orm.entity_manager
        tags:
            - { name: kernel.event_listener, event: oro_menu.configure.application_menu, method: onNavigationConfigure, priority: -10 }

    orocrm_amazon.event_listener.order_items_grid_listener:
        class: %oro_datagrid.event_listener.base_orm_relation.class%
        arguments:
            - 'id'
            - false
        tags:
            - { name: kernel.event_listener, event: oro_datagrid.datagrid.build.after.amazon-orderitem-grid, method: onBuildAfter }
